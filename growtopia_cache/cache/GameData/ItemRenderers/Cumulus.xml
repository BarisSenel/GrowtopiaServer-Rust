<?xml version="1.0"?>
<ItemRenderer>
  <Data>
    <Sprite name="s_Left" fileName="game/player_feet16.rttex" textureSize="32" frame="19,26" />
    <Sprite name="s_Right" fileName="game/player_feet16.rttex" textureSize="32" frame="19,27" />
    <Sprite name="s_trail" fileName="game/particles12.rttex" textureSize="32" frame="0,16" />
    <Sprite name="s_jumpCloudsHorizontal" fileName="game/particles12.rttex" textureSize="32" frame="1,16" />
    <Sprite name="s_jumpCloudsVertical" fileName="game/particles12.rttex" textureSize="32" frame="2,16" />
    
    <Animations>
      <SpriteAnimation name="a_LeftIdle" sprite="s_Left" animTime="1200" playOnState="Motion.Idle" isLoop="true">
        <Frame>19,26</Frame>
        <Frame>20,26</Frame>
        <Frame>21,26</Frame>
        <Frame>22,26</Frame>
        <Frame>23,26</Frame>
        <Frame>24,26</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_RightIdle" sprite="s_Right" animTime="1200" playOnState="Motion.Idle" isLoop="true">
        <Frame>19,27</Frame>
        <Frame>20,27</Frame>
        <Frame>21,27</Frame>
        <Frame>22,27</Frame>
        <Frame>23,27</Frame>
        <Frame>24,27</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_LeftMove" sprite="s_Left" animTime="600" playOnState="Motion.Moving" isLoop="true">
        <Frame>25,26</Frame>
        <Frame>26,26</Frame>
        <Frame>27,26</Frame>
        <Frame>28,26</Frame>
        <Frame>29,26</Frame>
        <Frame>30,26</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_RightMove" sprite="s_Right" animTime="600" playOnState="Motion.Moving" isLoop="true">
        <Frame>25,27</Frame>
        <Frame>26,27</Frame>
        <Frame>27,27</Frame>
        <Frame>28,27</Frame>
        <Frame>29,27</Frame>
        <Frame>30,27</Frame>
      </SpriteAnimation>
    </Animations>
    <RenderOptions>
      <Default>
        <Set name="PlayDefaultPunchAudio">true</Set>
        <Set name="ClothingOffsetFromShoes">-14</Set>
        <Set name="UserNameOffset">12</Set>
        <Set name="RenderShoesWithMermaidTail">true</Set>
        <Set name="ShoesShouldIgnoreRaptorLegsOffset">true</Set>
        <Set name="IgnorePunchTypeCheck">true</Set>
        <Set name="ShouldHover">true</Set>
        <Set name="IsToRenderPants">false</Set>
      </Default>
    </RenderOptions>
    <StateMachines>
      <StateMachine name="Motion">
        <States>
          <State name="Idle" />
          <State name="Moving" />
        </States>
        <Transitions>
          <Transition to="Idle" from="Moving">
            <Condition>
              <IsVariableFloat name="speed.length" operator="Less" abs="true">0.1</IsVariableFloat>
            </Condition>
          </Transition>
          <Transition to="Moving" from="Idle">
            <Condition>
              <IsVariableFloat name="speed.length" operator="Greater" abs="true">0.1</IsVariableFloat>
            </Condition>
          </Transition>
        </Transitions>
      </StateMachine>
    </StateMachines>
    <ParticleSystems>
      <ParticleSystem name="ps_trail">
        <Emitter>
          <Set name="offset">-16, 0</Set>
          <Set name="emissionInterval">0.01</Set>
          <Set name="infParticles">true</Set>
          <Set name="infLifeTime">true</Set>
          <Set name="particlesPerEmission">1</Set>
          <Set name="particlesToEmit">1</Set>
        </Emitter>
        <Particle angleRelativeToPlayerSpeed="true">
          <Set name="sprite">s_trail</Set>
          <Set name="inSpecificOrder">true</Set>
          <Set name="blendingMode">PREMULTIPLIED_ALPHA</Set>
          <Curve name="initialAlpha">
            <KeyFrame>0, 1</KeyFrame>
            <KeyFrame>0.3, 1</KeyFrame>
            <KeyFrame>1, 0</KeyFrame>
          </Curve>
          <Curve name="initialScale">
            <KeyFrame>0, 0.75,0.5</KeyFrame>
            <KeyFrame>1, 0.75,0.1</KeyFrame>
          </Curve>
          <Set name="lifeTime">0.5</Set>
        </Particle>
      </ParticleSystem>
      <ParticleSystem name="ps_jumpClouds">
        <Emitter>
          <Set name="particlesPerEmission">3</Set>
          <Set name="particlesToEmit">1</Set>
          <Set name="offset">0,0</Set>
        </Emitter>
        <Particle>
          <Select name="sprite" input="particleIndex">
            <Item>"s_jumpCloudsHorizontal"</Item>
            <Item>"s_jumpCloudsHorizontal"</Item>
            <Item>"s_jumpCloudsVertical"</Item>
          </Select>
          <Select name="flipX" input="particleIndex">
            <Item>false</Item>
            <Item>true</Item>
            <Item>false</Item>
          </Select>
          <Select name="initialVelocity" input="particleIndex">
            <Item>-40, 0</Item>
            <Item>40, 0</Item>
            <Item>0, 40</Item>
          </Select>
          <Set name="blendingMode">PREMULTIPLIED_ALPHA</Set>
          <Set name="lifeTime">0.75</Set>
          <Curve name="initialAlpha">
            <KeyFrame>0, 1</KeyFrame>
            <KeyFrame>0.5, 1</KeyFrame>
            <KeyFrame>1, 0</KeyFrame>
          </Curve>
        </Particle>
      </ParticleSystem>
    </ParticleSystems>
  </Data>
  <RenderRules>
    <RenderShoes>
      <Group>
        <StopIf>
          <IsRenderMod>RENDER_MOD_MINI_YOU</IsRenderMod>
        </StopIf>
        <ParticleSystemRender name="ps_trail"/>
      </Group>
      
      <SpriteRender name="s_Left" offset="0,10" blend="PREMULTIPLIED_ALPHA" drawShadow="true" alignmentLeft="DOWN_LEFT" alignmentRight="DOWN_RIGHT" />
      <SpriteRender name="s_Right" offset="0,10" blend="PREMULTIPLIED_ALPHA" drawShadow="true" alignmentLeft="DOWN_RIGHT" alignmentRight="DOWN_LEFT" />
      
      <Group>
      <StopIf>
        <IsRenderMod>RENDER_MOD_MINI_YOU</IsRenderMod>
      </StopIf>
      <ParticleSystemUpdate name="ps_trail" onState="Motion.Moving"/>
      <ParticleSystemUpdate name="ps_jumpClouds" onAction="JUMPSTART|JUMPDOUBLE"/>
      </Group>
    </RenderShoes>
  </RenderRules>
</ItemRenderer>
